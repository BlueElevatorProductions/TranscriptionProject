/**
 * MainLayout.css - CSS Grid-based layout system
 * 
 * Uses CSS custom properties for dynamic sizing
 * Responsive design with minimum width constraints
 */

.main-layout {
  /* CSS Grid Layout */
  display: grid;
  width: 100%;
  height: 100vh;
  min-width: 800px;
  
  /* Grid template - panels are overlaid, not in grid */
  grid-template-areas:
    "header"
    "transcript"
    "audio";
  
  /* Grid sizing - transcript always full width */
  grid-template-columns: 1fr;
  grid-template-rows: 
    auto /* header - size to content */
    1fr  /* transcript - fill remaining space */
    var(--audio-height); /* audio - dynamic height */
  
  /* Visual styling */
  background: var(--background-color, #f5f5f5);
  color: var(--text-color, #333);
  font-family: var(--font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif);
  
  /* Smooth transitions for layout changes */
  transition: grid-template-columns 0.3s ease-out,
              grid-template-rows 0.3s ease-out;
}

/* Layout when audio is hidden */
.main-layout[data-audio-visible="false"] {
  grid-template-areas:
    "header"
    "transcript";
  
  grid-template-rows: 
    auto /* header */
    1fr; /* transcript fills remaining */
}

/* Legacy layout fallback */
.legacy-layout {
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Responsive behavior */
@media (max-width: 1200px) {
  .main-layout {
    min-width: 600px;
  }
  
  .main-layout {
    --panels-width: 250px;
  }
}

@media (max-width: 900px) {
  .main-layout {
    /* Force single column on small screens */
    grid-template-areas:
      "header"
      "transcript"
      "audio";
    
    grid-template-columns: 1fr;
    --panels-width: 0px;
  }
  
  .main-layout[data-audio-visible="false"] {
    grid-template-areas:
      "header"
      "transcript";
  }
}

/* Focus management for keyboard navigation */
.main-layout:focus-within {
  outline: none;
}

/* Region-specific styling */
.header-region {
  grid-area: header;
  border-bottom: 1px solid var(--border-color, #ddd);
  background: var(--header-background, #fff);
  z-index: 100;
}

.transcript-region {
  grid-area: transcript;
  overflow: hidden;
  background: var(--transcript-background, #fff);
  position: relative;
}

.panels-region {
  position: fixed;
  top: 60px; /* Below header */
  right: 0;
  bottom: 0; /* Above audio when present */
  width: var(--panels-width);
  border-left: 1px solid var(--border-color, #ddd);
  background: var(--panels-background, #f9f9f9);
  overflow: hidden;
  z-index: 20;
  transform: translateX(100%);
  transition: transform 0.3s ease-out;
}

.panels-region:not(.hidden) {
  transform: translateX(0);
}

.audio-region {
  grid-area: audio;
  border-top: 1px solid var(--border-color, #ddd);
  background: var(--audio-background, #f0f0f0);
  overflow: hidden;
  position: relative;
  z-index: 10;
}

/* When panels are visible, adjust audio region bottom position */
.main-layout[data-panels-visible="true"] .panels-region {
  bottom: var(--audio-height);
}

/* Animation classes for smooth transitions */
.layout-transition-enter {
  opacity: 0;
  transform: scale(0.95);
}

.layout-transition-enter-active {
  opacity: 1;
  transform: scale(1);
  transition: opacity 0.3s ease-out, transform 0.3s ease-out;
}

.layout-transition-exit {
  opacity: 1;
  transform: scale(1);
}

.layout-transition-exit-active {
  opacity: 0;
  transform: scale(0.95);
  transition: opacity 0.3s ease-out, transform 0.3s ease-out;
}

/* Print styles */
@media print {
  .main-layout {
    height: auto;
    grid-template-areas: "transcript";
    grid-template-columns: 1fr;
    grid-template-rows: auto;
  }
  
  .header-region,
  .panels-region,
  .audio-region {
    display: none !important;
  }
}