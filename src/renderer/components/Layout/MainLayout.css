/**
 * MainLayout.css - CSS Grid-based layout system
 * 
 * Uses CSS custom properties for dynamic sizing
 * Responsive design with minimum width constraints
 */

.main-layout {
  /* CSS Grid Layout */
  display: grid;
  width: 100%;
  height: 100vh;
  min-width: 800px;
  
  /* Grid template - panels are overlaid, not in grid */
  grid-template-areas:
    "header"
    "transcript"
    "audio";
  
  /* Grid sizing - transcript always full width */
  grid-template-columns: 1fr;
  grid-template-rows: 
    auto /* header - size to content */
    1fr  /* transcript - fill remaining space */
    var(--audio-height); /* audio - dynamic height */
  
  /* Visual styling - Blue background as per mockup */
  background: #4a90e2; /* Primary blue background */
  color: var(--text-color, #333);
  font-family: var(--font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif);
  
  /* Smooth transitions for layout changes */
  transition: grid-template-columns 0.3s ease-out,
              grid-template-rows 0.3s ease-out;
}

/* Layout when audio is hidden */
.main-layout[data-audio-visible="false"] {
  grid-template-areas:
    "header"
    "transcript";
  
  grid-template-rows: 
    auto /* header */
    1fr; /* transcript fills remaining */
}

/* Legacy layout fallback */
.legacy-layout {
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Responsive behavior */
@media (max-width: 1200px) {
  .main-layout {
    min-width: 600px;
  }
  
  .main-layout {
    --panels-width: 250px;
  }
}

@media (max-width: 900px) {
  .main-layout {
    /* Force single column on small screens */
    grid-template-areas:
      "header"
      "transcript"
      "audio";
    
    grid-template-columns: 1fr;
    --panels-width: 0px;
  }
  
  .main-layout[data-audio-visible="false"] {
    grid-template-areas:
      "header"
      "transcript";
  }
}

/* Focus management for keyboard navigation */
.main-layout:focus-within {
  outline: none;
}

/* Region-specific styling */
.header-region {
  grid-area: header;
  background: rgba(0, 0, 0, 0.1); /* Light black overlay on blue */
  z-index: 100;
}

.transcript-region {
  grid-area: transcript;
  overflow: hidden;
  background: rgba(0, 0, 0, 0.05); /* Very light black overlay */
  position: relative;
}

.panels-region {
  position: fixed;
  top: 60px; /* Below header */
  right: 0;
  bottom: 0; /* Above audio when present */
  width: var(--panels-width);
  background: rgba(0, 0, 0, 0.8); /* Black overlay as per mockup */
  overflow: hidden;
  z-index: 20;
  transform: translateX(0); /* Start visible for testing */
  transition: transform 0.3s ease-out;
}

.panels-region.hidden {
  transform: translateX(100%);
}

.audio-region {
  grid-area: audio;
  background: rgba(0, 0, 0, 0.2); /* Medium black overlay */
  overflow: hidden;
  position: relative;
  z-index: 10;
}

/* When panels are visible, adjust audio region bottom position */
.main-layout[data-panels-visible="true"] .panels-region {
  bottom: var(--audio-height);
}

/* Animation classes for smooth transitions */
.layout-transition-enter {
  opacity: 0;
  transform: scale(0.95);
}

.layout-transition-enter-active {
  opacity: 1;
  transform: scale(1);
  transition: opacity 0.3s ease-out, transform 0.3s ease-out;
}

.layout-transition-exit {
  opacity: 1;
  transform: scale(1);
}

.layout-transition-exit-active {
  opacity: 0;
  transform: scale(0.95);
  transition: opacity 0.3s ease-out, transform 0.3s ease-out;
}

/* Print styles */
@media print {
  .main-layout {
    height: auto;
    grid-template-areas: "transcript";
    grid-template-columns: 1fr;
    grid-template-rows: auto;
  }
  
  .header-region,
  .panels-region,
  .audio-region {
    display: none !important;
  }
}